%% Utility macros
-define(normalize_float(Float, Vars),
        case maps:get(poc_version, Vars, undefined) of
            V when is_integer(V), V > 4 ->
                blockchain_utils:normalize_float(Float);
            _ ->
                Float
        end).

-define(TO_B58(X), libp2p_crypto:bin_to_b58(X)).
-define(TO_ANIMAL_NAME(X), element(2, erl_angry_purple_tiger:animal_name(libp2p_crypto:bin_to_b58(X)))).

-define(SNR_CURVE, #{12 => {-90,-35},
                     4 => {-115,-112},
                     -4 => {-125,-125},
                     16 => {-90,-35},
                     -15 => {-124,-124},
                     -6 => {-124,-124},
                     -1 => {-125,-125},
                     -2 => {-125,-125},
                     5 => {-115,-100},
                     14 => {-90,-35},
                     -11 => {-125,-125},
                     9 => {-95,-45},
                     10 => {-90,-40},
                     -12 => {-125,-125},
                     -7 => {-123,-123},
                     -10 => {-125,-125},
                     -14 => {-125,-125},
                     2 => {-117,-112},
                     6 => {-113,-100},
                     -5 => {-125,-125},
                     3 => {-115,-112},
                     -3 => {-125,-125},
                     1 => {-120,-117},
                     7 => {-108,-45},
                     8 => {-105,-45},
                     -8 => {-125,-125},
                     0 => {-125,-125},
                     13 => {-90,-35},
                     -16 => {-123,-123},
                     -17 => {-123,-123},
                     -18 => {-123,-123},
                     -19 => {-123,-123},
                     -20 => {-123,-123},
                     15 => {-90,-35},
                     -9 => {-125,-125},
                     -13 => {-125,-125},
                     11 => {-90,-35}}).

-define(SNR_CURVE_915, #{-10 => 13.500000,
-21 => 13.600000,
-30 => 13.500000,
-41 => 13.200000,
-50 => 13.200000,
-60 => 13.100000,
-70 => 14.000000,
-80 => 13.200000,
-81 => 12.800000,
-82 => 13.800000,
-83 => 13.000000,
-84 => 13.200000,
-85 => 13.800000,
-86 => 13.200000,
-87 => 12.200000,
-88 => 13.500000,
-89 => 13.000000,
-90 => 12.500000,
-91 => 12.400000, %interpolated
-92 => 12.300000, %interpolated
-93 => 12.300000, %interpolated
-94 => 12.200000, %interpolated
-95 => 12.200000,
-96 => 12.000000, %interpolated
-97 => 11.900000, %interpolated
-98 => 11.700000, %interpolated
-99 => 11.500000, %interpolated
-100 => 11.500000,
-101 => 11.000000,
-102 => 10.000000,
-103 => 9.800000,
-104 => 9.800000,
-105 => 8.200000,
-106 => 7.800000,
-107 => 6.800000,
-108 => 6.200000,
-109 => 5.500000,
-110 => 4.800000,
-111 => 3.800000,
-112 => 3.000000,
-113 => 2.600000,
-114 => 1.800000,
-115 => 0.500000,
-116 => -0.500000,
-117 => -1.200000,
-118 => -2.200000,
-119 => -3.200000,
-120 => -4.000000,
-121 => -4.800000,
-122 => -6.200000,
-123 => -6.800000,
-124 => -8.000000,
-125 => -9.000000,
-126 => -10.000000,
-127 => -11.000000,
-128 => -12.000000,
-129 => -12.800000,
-130 => -13.000000,
-130 => -13.500000,
-131 => -13.800000,
-131 => -15.200000}).

-define(SNR_CURVE_868, #{
          -7 => 7.800000,
-7 => 7.800000,
-8 => 7.800000,
-8 => 7.800000,
-9 => 7.500000,
-10 => 8.000000,
-11 => 7.800000,
-11 => 7.800000,
-13 => 8.000000,
-14 => 7.800000,
-18 => 8.200000,
-23 => 8.200000,
-33 => 7.200000,
-45 => 7.200000,
-55 => 7.500000,
-64 => 7.200000,
-74 => 7.800000,
-84 => 7.200000,
-94 => 7.200000,
-95 => 7.000000,
-96 => 6.000000,
-97 => 5.800000,
-98 => 6.000000,
-99 => 5.200000,
-100 => 6.200000,
-101 => 5.500000,
-102 => 4.800000,
-103 => 4.800000,
-104 => 4.800000,
-105 => 3.800000,
-106 => 3.800000,
-107 => 4.000000,
-108 => 3.200000,
-109 => 3.000000,
-110 => 3.200000,
-111 => 2.200000,
-112 => 1.800000,
-113 => 2.200000,
-114 => 0.800000,
-115 => 0.200000,
-116 => -0.200000,
-117 => -1.000000,
-118 => -2.000000,
-119 => -3.000000,
-120 => -3.800000,
-121 => -4.500000,
-122 => -5.800000,
-123 => -6.800000,
-124 => -7.500000,
-125 => -8.000000,
-126 => -9.000000,
-127 => -10.000000,
-128 => -11.000000,
-129 => -12.000000,
-130 => -13.000000,
-131 => -13.800000,
-132 => -14.500000,
-133 => -15.800000,
-134 => -16.800000,
-135 => -18.000000,
-136 => -18.800000,
-137 => -19.500000,
-138 => -21.000000,
-138 => -21.000000,
-139 => -22.200000,
-140 => -23.500000}).

-define(MAX_UNIQ_CLIENTS, 1100).
